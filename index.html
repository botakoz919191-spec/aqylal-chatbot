<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <title>AqyIAI — оқу көмекші чатбот</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="chat-container">
        <h2>AqyIAI — оқу көмекші чатбот</h2>
        <div id="chat-box"></div>
        <form id="form">
            <input type="text" id="message" name="message" placeholder="Сұрақ қойыңыз..." required>
            <button type="submit">Жіберу</button>
        </form>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const form = document.getElementById("form");
            const messageInput = document.getElementById("message");
            const chatbox = document.getElementById("chat-box");

            form.addEventListener("submit", function(e) {
                e.preventDefault();
                let msg = messageInput.value.trim();
                if (!msg) return;

                chatbox.innerHTML += `<div class='user'>${msg}</div>`;
                messageInput.value = "";

                fetch("/ask", {
                    method: "POST",
                    headers: { "Content-Type": "application/x-www-form-urlencoded" },
                    body: "message=" + encodeURIComponent(msg)
                })
                .then(res => res.json())
                .then(data => {
                    chatbox.innerHTML += `<div class='bot'>${data.answer}</div>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                });
            });
        });
    </script>
</body>
</html>
